<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <script>
    function detectTwice() {
      if (window.FaceDetector == undefined) {
        console.error(`Face Detection not supported`);
        return;
      }
      const faceDetector = new FaceDetector();
      const image = new ImageData(200, 100);

      Object.prototype.__defineGetter__("then", function() {
        faceDetector.detect(image);
        faceDetector.detect(image);
        faceDetector.detect(image);
        faceDetector.detect(image);
        faceDetector.detect(image);
        faceDetector.detect(image);
        faceDetector.detect(image);
        faceDetector.detect(image);
      });

      faceDetector.detect(image)
        .then(faces => {})
          .catch((e) => console.error(`Face Detection failed`));

      faceDetector.detect(image)
        .then(faces => {})
          .catch((e) => console.error(`Face Detection failed`));
    }
    detectTwice();
  </script>
</body>
</html>
